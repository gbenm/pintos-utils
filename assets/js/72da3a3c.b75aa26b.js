"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[349],{3905:(e,n,a)=>{a.d(n,{Zo:()=>d,kt:()=>c});var t=a(7294);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function i(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function o(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?i(Object(a),!0).forEach((function(n){r(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function s(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},i=Object.keys(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=t.createContext({}),p=function(e){var n=t.useContext(l),a=n;return e&&(a="function"==typeof e?e(n):o(o({},n),e)),a},d=function(e){var n=p(e.components);return t.createElement(l.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},u=t.forwardRef((function(e,n){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=p(a),c=r,h=u["".concat(l,".").concat(c)]||u[c]||m[c]||i;return a?t.createElement(h,o(o({ref:n},d),{},{components:a})):t.createElement(h,o({ref:n},d))}));function c(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=u;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var p=2;p<i;p++)o[p]=a[p];return t.createElement.apply(null,o)}return t.createElement.apply(null,a)}u.displayName="MDXCreateElement"},2105:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var t=a(7462),r=(a(7294),a(3905));const i={sidebar_position:2},o="Instalaci\xf3n",s={unversionedId:"pintosph/install",id:"pintosph/install",title:"Instalaci\xf3n",description:"Descargar el script",source:"@site/docs/pintosph/install.md",sourceDirName:"pintosph",slug:"/pintosph/install",permalink:"/pintos-utils/pintosph/install",draft:!1,editUrl:"https://github.com/gbenm/pintos-utils/tree/main/docs/pintosph/install.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"pintosph",previous:{title:"Pintos Phase",permalink:"/pintos-utils/pintosph/"},next:{title:"Cambiar de fase",permalink:"/pintos-utils/pintosph/change-phase"}},l={},p=[{value:"Descargar el script",id:"descargar-el-script",level:2},{value:"Bash o Zsh",id:"bash-o-zsh",level:2},{value:"Archivo Pintos.pm",id:"archivo-pintospm",level:2},{value:"Archivo pintos",id:"archivo-pintos",level:2}],d={toc:p};function m(e){let{components:n,...a}=e;return(0,r.kt)("wrapper",(0,t.Z)({},d,a,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"instalaci\xf3n"},"Instalaci\xf3n"),(0,r.kt)("h2",{id:"descargar-el-script"},"Descargar el script"),(0,r.kt)("p",null,"Dir\xedjase a ",(0,r.kt)("inlineCode",{parentName:"p"},"<directorio-pintos>/pintos/utils")," con el objetivo que tal como los otros scripts, pueda utilizarse de forma global (note que esta ruta es un ejemplo)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"cd ~/pintos/utils # si est\xe1 en el home del usuario\n")),(0,r.kt)("p",null,"Utilice ",(0,r.kt)("strong",{parentName:"p"},"curl")," para descargar el script:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"curl -fsSLo pintosph https://git.io/J3NAP && chmod +x pintosph\n")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Si no tiene instalado ",(0,r.kt)("strong",{parentName:"p"},"curl")," proceda a instalarlo. Por la naturaleza del proyecto probablemente se encuentre en Ubuntu 16, por lo que bastar\xe1 con ",(0,r.kt)("em",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"em"},"sudo apt install curl")))),(0,r.kt)("h2",{id:"bash-o-zsh"},"Bash o Zsh"),(0,r.kt)("p",null,"Dirijase hacia a su ",(0,r.kt)("strong",{parentName:"p"},"home")," y edite nuevamente el archivo que corresponde a la configuraci\xf3n del entorno de su terminal, normalmente se llama ",(0,r.kt)("inlineCode",{parentName:"p"},".bashrc")," (note que es un archivo oculto). Si utiliza ",(0,r.kt)("strong",{parentName:"p"},"zsh")," en vez de ",(0,r.kt)("strong",{parentName:"p"},"bash")," su archivo es ",(0,r.kt)("inlineCode",{parentName:"p"},".zshrc")," si no tiene ni idea que es ",(0,r.kt)("strong",{parentName:"p"},"zsh")," no se preocupe por eso, simplemente edite ",(0,r.kt)("inlineCode",{parentName:"p"},".bashrc")," (pintosph \xfanicamente funciona con estos 2)."),(0,r.kt)("p",null,"Ahora agregue las siguiente lineas en el archivo que corresponde a su situaci\xf3n."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers",showLineNumbers:!0},'export PINTOS_HOME=~/pintos # coloque la ruta al c\xf3digo fuente del pj\nPINTOSPH="" # stop@000001\n\nexport PINTOSPH\n')),(0,r.kt)("p",null,"Y refresque las configuraciones, si est\xe1 usando bash utilice:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"source ~/.bashrc\n")),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Es de vital importancia que copie exactamente la ",(0,r.kt)("strong",{parentName:"p"},"linea 2")," porque el script utiliza una expresi\xf3n regular basada en el comentario para localizar y reemplazar la linea, la ",(0,r.kt)("strong",{parentName:"p"},"linea 4")," es importante para exportar la variable, pero no tiene ninguna implicaci\xf3n en la b\xfasqueda y sustituci\xf3n de la fase.")),(0,r.kt)("p",null,"Al final su archivo se ver\xe1 similar a lo de abajo."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:"{5-6} showLineNumbers title='~/.bashrc'","{5-6}":!0,showLineNumbers:!0,title:"'~/.bashrc'"},'... # cosas que tiene el archivo\n\nexport PATH=$PATH:/home/benyamin/pintos/utils\n\nexport PINTOS_HOME=~/pintos\nPINTOSPH="" # stop@000001\n\nexport PINTOSPH\n')),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"La ",(0,r.kt)("strong",{parentName:"p"},"linea 3")," ya deber\xeda estar en su archivo si ya instal\xf3 el proyecto as\xed que s\xf3lo se puso de indicador.")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"S\xed, exactamente, PINTOSPH tiene un valor vac\xedo al inicio, no se preocupe, de eso se encarga ",(0,r.kt)("strong",{parentName:"p"},"pintosph."))),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Recuerde que: ",(0,r.kt)("strong",{parentName:"p"},"kernel.bin")," y ",(0,r.kt)("strong",{parentName:"p"},"loader.bin")," se generan siempre en <",(0,r.kt)("strong",{parentName:"p"},"fase>/build,")," por ejemplo para la fase ",(0,r.kt)("strong",{parentName:"p"},"threads")," deber\xe1 buscarlos como ",(0,r.kt)("strong",{parentName:"p"},"threads/build/kernel.bin")," y ",(0,r.kt)("strong",{parentName:"p"},"threads/build/loader.bin"))),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"La secci\xf3n de ",(0,r.kt)("a",{parentName:"p",href:"install/#bash-o-zsh"},"Bash o Zsh")," es necesario que cada miembro del grupo lo realice en su propio archivo, los dem\xe1s pasos s\xf3lo necesitan ser hechos una vez.")),(0,r.kt)("h2",{id:"archivo-pintospm"},"Archivo Pintos.pm"),(0,r.kt)("p",null,"Dir\xedjase hacia este archivo, y en vez de colocar un ",(0,r.kt)("strong",{parentName:"p"},"path absoluto")," a su computadora, lo haremos funcionar para cualquier ordenador que coloque el proyecto en el mismo lugar relativo al ",(0,r.kt)("strong",{parentName:"p"},"home.")," Si no ha modificado el archivo se ver\xe1 como el siguiente, la linea de inter\xe9s es la ",(0,r.kt)("strong",{parentName:"p"},"linea 8")," en el caso de abajo, en el archivo real est\xe1 alrededor de la 362."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-perl",metastring:'title="~/pintos/utils/Pintos.pm" showLineNumbers {8}',title:'"~/pintos/utils/Pintos.pm"',showLineNumbers:!0,"{8}":!0},'# read_loader($file_name)\n#\n# Reads and returns the first $LOADER_SIZE bytes in $file_name.\n# If $file_name is undefined, tries to find the default loader.\n# Makes sure that the loader is a reasonable size.\nsub read_loader {\n    my ($name) = @_;\n    $name = find_file ("loader.bin") if !defined $name;\n    die "Cannot find loader\\n" if !defined $name;\n    my ($handle);\n    open ($handle, \'<\', $name) or die "$name: open: $!\\n";\n    -s $handle == $LOADER_SIZE || -s $handle == 512\n      or die "$name: must be exactly $LOADER_SIZE or 512 bytes long\\n";\n    $loader = read_fully ($handle, $name, $LOADER_SIZE);\n    close ($handle) or die "$name: close: $!\\n";\n    return $loader;\n}\n')),(0,r.kt)("p",null,"Y prosiga a dejar la ",(0,r.kt)("strong",{parentName:"p"},"linea 8")," similar a la ",(0,r.kt)("strong",{parentName:"p"},"linea 8")," del siguiente bloque."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-perl",metastring:'title="~/pintos/utils/Pintos.pm" showLineNumbers {8}',title:'"~/pintos/utils/Pintos.pm"',showLineNumbers:!0,"{8}":!0},'# read_loader($file_name)\n#\n# Reads and returns the first $LOADER_SIZE bytes in $file_name.\n# If $file_name is undefined, tries to find the default loader.\n# Makes sure that the loader is a reasonable size.\nsub read_loader {\n  my ($name) = @_;\n  $name = find_file ($ENV{"PINTOS_HOME"} . "/" . $ENV{"PINTOSPH"} . "/build/loader.bin") if !defined $name;\n  die "Cannot find loader\\n" if !defined $name;\n  my ($handle);\n  open ($handle, \'<\', $name) or die "$name: open: $!\\n";\n  -s $handle == $LOADER_SIZE || -s $handle == 512\n    or die "$name: must be exactly $LOADER_SIZE or 512 bytes long\\n";\n  $loader = read_fully ($handle, $name, $LOADER_SIZE);\n  close ($handle) or die "$name: close: $!\\n";\n  return $loader;\n}\n')),(0,r.kt)("p",null,"Lo que se hizo es que la instrucci\xf3n ",(0,r.kt)("inlineCode",{parentName:"p"},'$ENV{"PINTOS_HOME"}')," en Perl, saca el path hacia el proyecto (usted defini\xf3 esta variable), es decir que es equivalente al ",(0,r.kt)("inlineCode",{parentName:"p"},"~/pintos"),", el ",(0,r.kt)("inlineCode",{parentName:"p"},".")," sirve para concatenar ",(0,r.kt)("inlineCode",{parentName:"p"},"strings")," y exactamente como lo pens\xf3 ",(0,r.kt)("inlineCode",{parentName:"p"},'$ENV{"PINTOSPH"}')," saca el valor de la variable que defini\xf3 en el paso anterior :ok","_","hand: , como ejemplo particular tomemos ",(0,r.kt)("strong",{parentName:"p"},"home")," de Pedro, el decidi\xf3 ponerle a su usuario pedro, por lo que el path hacia su ",(0,r.kt)("em",{parentName:"p"},"home es")," ",(0,r.kt)("inlineCode",{parentName:"p"},"/home/pedro"),"  y que Pedro descarg\xf3 la versi\xf3n de la ",(0,r.kt)("a",{parentName:"p",href:"https://hernandez-kevin.gitbook.io/la-guia-del-frijol/"},"gu\xeda del frijol")," por lo que ",(0,r.kt)("inlineCode",{parentName:"p"},"pintos")," es la carpeta ra\xedz de los archivos fuente (la versi\xf3n de original tiene ",(0,r.kt)("inlineCode",{parentName:"p"},"pintos/src"),"como punto de partida), actualmente Pedro debe comenzar en ",(0,r.kt)("strong",{parentName:"p"},"threads")," para empezar la batalla contra la fase 1. Despu\xe9s de haber ",(0,r.kt)("a",{parentName:"p",href:"change-phase"},"cambiado de fase")," a ",(0,r.kt)("strong",{parentName:"p"},"threads")," la ",(0,r.kt)("strong",{parentName:"p"},"linea 8")," equivaldr\xeda a lo siguiente:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'$ENV{"PINTOS_HOME"}')," -> /home/pedro/pintos"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'$ENV{"PINTOSPH"}')," -> threads")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},'"/home/pedro/pintos" + "/" + "threads" + "/build/loader.bin"')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},'"/home/pedro/pintos/threads/build/loader.bin"')),(0,r.kt)("p",null,"Y de esa forma no depende de la computadora de Pedro, sino de la direcci\xf3n relativa."),(0,r.kt)("h2",{id:"archivo-pintos"},"Archivo pintos"),(0,r.kt)("p",null,"Debe repetir lo anterior, pero con el archivo ",(0,r.kt)("inlineCode",{parentName:"p"},"utils/pintos"),". La linea de importancia es la ",(0,r.kt)("strong",{parentName:"p"},"linea 6")," (la real es aproximadamente la 257)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-perl",metastring:'title="~/pintos/utils/pintos" {6} showLineNumbers',title:'"~/pintos/utils/pintos"',"{6}":!0,showLineNumbers:!0},"# Locates the files used to back each of the virtual disks,\n# and creates temporary disks.\nsub find_disks {\n # Find kernel, if we don't already have one.\n if (!exists $parts{KERNEL}) {\n   my $name = find_file ('kernel.bin');\n   die \"Cannot find kernel\\n\" if !defined $name;\n   do_set_part ('KERNEL', 'file', $name);\n }\n\n ...\n}\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-perl",metastring:'title="~/pintos/utils/pintos" {6} showLineNumbers',title:'"~/pintos/utils/pintos"',"{6}":!0,showLineNumbers:!0},"# Locates the files used to back each of the virtual disks,\n# and creates temporary disks.\nsub find_disks {\n  # Find kernel, if we don't already have one.\n  if (!exists $parts{KERNEL}) {\n    my $name = find_file ($ENV{\"PINTOS_HOME\"} . '/' . $ENV{\"PINTOSPH\"} . '/build/kernel.bin');\n    die \"Cannot find kernel\\n\" if !defined $name;\n    do_set_part ('KERNEL', 'file', $name);\n  }\n\n ...\n}\n")))}m.isMDXComponent=!0}}]);